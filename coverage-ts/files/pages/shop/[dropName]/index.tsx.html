
  <!DOCTYPE html>
  <html>
    <head>
      <title>index.tsx</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">pages/shop/[dropName]/index.tsx</td><td class="">86.84%</td><td class="">80%</td><td class="">152</td><td class="">132</td><td class="">20</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">import axios from &quot;axios&quot;;
import useSWR from &quot;swr&quot;;
import NextLink from &quot;next/link&quot;;
import Image from &quot;next/image&quot;;
import { Box, Grid, Heading, Link, Skeleton, Stack, Text } from &quot;@chakra-ui/react&quot;;
import { db } from &quot;../../../utils/firebaseAdmin&quot;;
import { imageLoader } from &quot;../../../utils/imageLoader&quot;;
import { Item } from &quot;../../../@types/db&quot;;
import { GetServerSideProps } from &quot;next&quot;;

const fetcher = (url: string, dropId: string) =&gt; axios.post(url, { dropId }).then(({ data }) =&gt; data as Item[]);

const Shop = ({ data: dropData }) =&gt; {
  const { dropId, nameDashified } = dropData;
  const { data: items } = useSWR([&quot;/api/getDropItems&quot;, dropId], fetcher);

  return (
    &lt;Box maxW={1080} mx=&quot;auto&quot;&gt;
      &lt;Stack my=&quot;8&quot;&gt;
        &lt;Heading textAlign=&quot;center&quot; fontSize=&quot;8xl&quot;&gt;
          {dropData.name}
        &lt;/Heading&gt;
      &lt;/Stack&gt;
      &lt;Grid templateColumns=&quot;repeat(3, 1fr)&quot; my={4} mx=&quot;auto&quot; gap={4}&gt;
        {items ? (
          items.map((item, key) =&gt; (
            &lt;NextLink passHref key={key} href={`${nameDashified}/${item.nameDashified}`}&gt;
              &lt;Link&gt;
                &lt;Box&gt;
                  &lt;Image priority loader={imageLoader} src={`${item.images[0]}.webp`} alt={`Picture of ${item.name}`} width={500} height={500}&gt;&lt;/Image&gt;
                  &lt;Text textAlign=&quot;center&quot; fontSize=&quot;lg&quot; fontWeight=&quot;semibold&quot;&gt;
                    {item.name}
                  &lt;/Text&gt;
                &lt;/Box&gt;
              &lt;/Link&gt;
            &lt;/NextLink&gt;
          ))
        ) : (
          &lt;&gt;
            &lt;Skeleton h={4} /&gt;
            &lt;Skeleton h={4} /&gt;
            &lt;Skeleton h={4} /&gt;
          &lt;/&gt;
        )}
      &lt;/Grid&gt;
    &lt;/Box&gt;
  );
};

export const getServerSideProps: GetServerSideProps = async (context) =&gt; {
  const dropName = context.params.dropName;
  const data = await db
    .collection(&quot;drops&quot;)
    .where(&quot;nameDashified&quot;, &quot;==&quot;, dropName)
    .get()
    .then((snap) =&gt; {
      const tempArray = [];
      snap.forEach((docRef) =&gt; {
        const doc = docRef.data();
        doc.dropId = docRef.id;
        tempArray.push(doc);
      });
      return tempArray[0];
    });
  if (!data || !data.available) {
    console.log(&quot;Drop unavailable or not found&quot;);
    context.res.writeHead(302, { location: &quot;/&quot; });
    context.res.end();
  }

  delete data.createdAt;
  delete data.startAt;
  delete data.available;

  return {
    props: { data: { ...data } },
  };
};

export default Shop;
</textarea><pre id="annotations" style="display:none">[{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:10,&quot;character&quot;:85,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:12,&quot;character&quot;:22,&quot;text&quot;:&quot;dropData&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:13,&quot;character&quot;:10,&quot;text&quot;:&quot;dropId&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:13,&quot;character&quot;:18,&quot;text&quot;:&quot;nameDashified&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:20,&quot;character&quot;:11,&quot;text&quot;:&quot;dropData&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:20,&quot;character&quot;:20,&quot;text&quot;:&quot;name&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:26,&quot;character&quot;:50,&quot;text&quot;:&quot;nameDashified&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:51,&quot;character&quot;:8,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:59,&quot;character&quot;:12,&quot;text&quot;:&quot;dropId&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:64,&quot;character&quot;:7,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:64,&quot;character&quot;:16,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:64,&quot;character&quot;:21,&quot;text&quot;:&quot;available&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:70,&quot;character&quot;:9,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:70,&quot;character&quot;:14,&quot;text&quot;:&quot;createdAt&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:71,&quot;character&quot;:9,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:71,&quot;character&quot;:14,&quot;text&quot;:&quot;startAt&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:72,&quot;character&quot;:9,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:72,&quot;character&quot;:14,&quot;text&quot;:&quot;available&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:75,&quot;character&quot;:13,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/index.tsx&quot;,&quot;line&quot;:75,&quot;character&quot;:24,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1}]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Mon, 23 Aug 2021 10:19:21 GMT</p>
    </body>
  </html>
  