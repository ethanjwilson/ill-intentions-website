
  <!DOCTYPE html>
  <html>
    <head>
      <title>[itemName].tsx</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">pages/shop/[dropName]/[itemName].tsx</td><td class="">97.95%</td><td class="">80%</td><td class="">146</td><td class="">143</td><td class="">3</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">import { Box, Button, Heading, Select, Stack } from &quot;@chakra-ui/react&quot;;
import axios from &quot;axios&quot;;
import { db } from &quot;../../../utils/firebaseAdmin&quot;;

import { useRouter } from &quot;next/router&quot;;
import { useState } from &quot;react&quot;;
import { imageLoader } from &quot;../../../utils/imageLoader&quot;;
import Image from &quot;next/image&quot;;
import { GetServerSideProps } from &quot;next&quot;;
import { Item, Sizes } from &quot;../../../@types/db&quot;;

const ItemPage = ({ itemId, name, stock, images }: Item &amp; { itemId: string }) =&gt; {
  const [size, setSize] = useState&lt;Sizes | &quot;&quot;&gt;(&quot;&quot;);
  const router = useRouter();
  const handleCheckout = async () =&gt; {
    if (Object.keys(stock).includes(size)) {
      const { checkoutId }: { checkoutId: string } = await axios.post(&quot;/api/stripe/create-checkout-session&quot;, { itemId, size }).then(({ data }) =&gt; data);
      router.push(`/checkout/${checkoutId}`);
    }
  };
  return (
    &lt;Box&gt;
      &lt;Stack my=&quot;8&quot;&gt;
        &lt;Heading textAlign=&quot;center&quot; fontSize=&quot;8xl&quot;&gt;
          {name}
        &lt;/Heading&gt;
      &lt;/Stack&gt;
      &lt;Stack my={4} maxW={500} mx=&quot;auto&quot;&gt;
        &lt;Image priority loader={imageLoader} src={`${images[0]}.webp`} alt={`Picture of ${name}`} width={500} height={500} /&gt;
        &lt;Select onChange={({ target }) =&gt; setSize(target.value as Sizes)} placeholder=&quot;Select Size&quot;&gt;
          {Object.keys(stock).map((key: Sizes, idx) =&gt; (
            &lt;option key={idx} value={key}&gt;
              {stock[key] &gt; 0 ? `${key.toUpperCase()} - ${stock[key]} in stock` : &quot;Not in stock&quot;}
            &lt;/option&gt;
          ))}
        &lt;/Select&gt;
        &lt;Button onClick={handleCheckout}&gt;Go To Checkout&lt;/Button&gt;
      &lt;/Stack&gt;
    &lt;/Box&gt;
  );
};

export const getServerSideProps: GetServerSideProps = async (context) =&gt; {
  const itemName = context.params.itemName;
  const data: Item = await db
    .collection(&quot;items&quot;)
    .where(&quot;nameDashified&quot;, &quot;==&quot;, itemName)
    .get()
    .then((snap) =&gt; {
      const tempArray = [];
      snap.forEach((docRef) =&gt; {
        const doc = docRef.data();
        doc.itemId = docRef.id;
        tempArray.push(doc);
      });
      return tempArray[0];
    });
  if (!data) {
    console.log(&quot;Drop unavailable or not found&quot;);
    context.res.writeHead(302, { location: &quot;/&quot; });
    context.res.end();
  }

  return {
    props: { ...data },
  };
};

export default ItemPage;
</textarea><pre id="annotations" style="display:none">[{&quot;file&quot;:&quot;pages/shop/[dropName]/[itemName].tsx&quot;,&quot;line&quot;:16,&quot;character&quot;:135,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/[itemName].tsx&quot;,&quot;line&quot;:16,&quot;character&quot;:146,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;pages/shop/[dropName]/[itemName].tsx&quot;,&quot;line&quot;:52,&quot;character&quot;:12,&quot;text&quot;:&quot;itemId&quot;,&quot;kind&quot;:1}]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Mon, 23 Aug 2021 10:19:21 GMT</p>
    </body>
  </html>
  